<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HotSpot</title>
</head>
<body>

    <p class="status-text">Tap the button below to continue</p>
    <button id="openApp">Open in App</button>

    <script>
    let canRedirect = false

        document.getElementById("openApp").onclick = function() {
            const currUrlQuery = window.location.search;
            const appSchemaUrl = `hotspotlive://${currUrlQuery.includes("group") ? "open-group" : "open-event"}${currUrlQuery}`;
            const appStoreUrl = "https://apps.apple.com/us/app/hotspot/id6444371402";

            // Try to open app
            try {
                new URL(appSchemaUrl)
                
                canRedirect = true
            }
            catch {
                canRedirect = false
            }
            if(canRedirect)
            {
                window.location = appSchemaUrl;

            } else {

                setTimeout(() => {
                    if(!canRedirect) {
                        window.location = appStoreUrl;
    
                    }
                }, 1500);
            }

        };
</script>
</body>
</html>
